---
title: "Intro1"
author: "Roberto Molowny-Horas"
date: "`r Sys.Date()`"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## Initializing an *inventory* object

An *inventory* object is really an *sf* POINT object with new classes appended. Therefore, we will be storing all information about the inventory (e.g. trees, saplings) as a 

An inventory consists of a set of forest stands which may or may not contain trees and/or saplings. Each of those stands is assumed to be circular and with geographic coordinates that correspond to the center of the stand.

To initialize an *inventory* object we need first to specify at least one unique id and a set of coordinates x,y. If we know the reference system for those coordinates we can provide it right now; otherwise, it can be set later on by using the *st_crs* function from the *sf* package. That is:

```{r}
a <- start_inventory("id1",runif(1), runif(1),"EPSG:4326")
```

or

```{r}
a <- start_inventory("id1",runif(1), runif(1))
sf::st_crs(a) <- "EPSG:4326"
```

Notice that we have set the *country* keyword to "Spain", since in this case our data will come from the Spanish Inventario Forestal Nacional.

The *inventory* a is currently empty, containing only a single stand with no trees or saplings. We can now start adding tree and sapling information for id1 and any other additional stand. However, before we move on we need to decide whether the *inventory* will contain a) individual data, i.e. data on individual trees of several species within each stand, b) matrix data, i.e. number of trees per species and diametric class, or c) continuous data, i.e. number of trees per species and diameter. This is done by setting the *type* keyword to individual (default), matrix or continuous, respectively. Moreover, we may want to specify that the object will contain data from the Spanish Inventario Forestal Nacional.

```{r}
a <- set_attributes(a, type = "individual", country = "Spain")
```

We have now initialized an empty inventory with stand which will contain individual trees (typically the result of field sampling) characterized by their diameter at breast height.


# Filling in tree and/or sapling data.

Once the *inventory* object has been initalized, we can 

```{r}
for (i in 1:5) {
  df <- data.frame(species = c(sample(c("Pnigra","Phalep"),5,replace=T)),
                   dbh = 7.5+runif(5)*20,
                   factor_diam = sample(c(127.324, 31.83099),5,replace=T))
a <- add_stand_data(a,letters[i],df,"Spain","trees")
}
```

